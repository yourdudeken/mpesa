{
	"info": {
		"_postman_id": "mpesa-gateway-api-collection",
		"name": "M-Pesa Gateway API",
		"description": "Complete M-Pesa Gateway API collection with all endpoints for STK Push, C2B, B2C, B2B, and utility operations.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "mpesa-gateway"
	},
	"item": [
		{
			"name": "Health Check",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/health",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"health"
					]
				},
				"description": "Check API health status and configuration"
			},
			"response": []
		},
		{
			"name": "STK Push",
			"item": [
				{
					"name": "Initiate STK Push",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"amount\": 100,\n    \"phone_number\": \"254712345678\",\n    \"account_reference\": \"INV-001\",\n    \"transaction_desc\": \"Payment\",\n    \"callback_url\": \"https://yourdomain.com/api/mpesa/callback/stk\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/stk-push",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"stk-push"
							]
						},
						"description": "Initiate STK Push (Lipa Na M-Pesa Online) payment request.\n\n**Required Fields:**\n- `amount`: Numeric, minimum 1\n- `phone_number`: Format 254XXXXXXXXX (Kenyan format)\n\n**Optional Fields:**\n- `account_reference`: Max 12 characters\n- `transaction_desc`: Max 13 characters\n- `callback_url`: Valid URL for receiving payment status"
					},
					"response": []
				},
				{
					"name": "Query STK Push Status",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"checkout_request_id\": \"ws_CO_191220191020363925\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/stk-query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"stk-query"
							]
						},
						"description": "Query the status of an STK Push transaction.\n\n**Required Fields:**\n- `checkout_request_id`: The CheckoutRequestID from STK Push response"
					},
					"response": []
				}
			],
			"description": "STK Push (Lipa Na M-Pesa Online) endpoints"
		},
		{
			"name": "C2B (Customer to Business)",
			"item": [
				{
					"name": "Register C2B URLs",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"confirmation_url\": \"https://yourdomain.com/api/mpesa/callback/c2b\",\n    \"validation_url\": \"https://yourdomain.com/api/mpesa/callback/c2b\",\n    \"response_type\": \"Completed\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/c2b/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"c2b",
								"register"
							]
						},
						"description": "Register validation and confirmation URLs for C2B transactions.\n\n**Required Fields:**\n- `confirmation_url`: URL for payment confirmations\n- `validation_url`: URL for payment validation\n\n**Optional Fields:**\n- `response_type`: Either 'Completed' or 'Cancelled'"
					},
					"response": []
				},
				{
					"name": "Simulate C2B Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"amount\": 100,\n    \"phone_number\": \"254712345678\",\n    \"bill_ref_number\": \"BILL-001\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/c2b/simulate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"c2b",
								"simulate"
							]
						},
						"description": "Simulate a C2B payment (sandbox only).\n\n**Required Fields:**\n- `amount`: Numeric, minimum 1\n- `phone_number`: Format 254XXXXXXXXX\n\n**Optional Fields:**\n- `bill_ref_number`: Reference number for the bill"
					},
					"response": []
				}
			],
			"description": "Customer to Business payment endpoints"
		},
		{
			"name": "B2C (Business to Customer)",
			"item": [
				{
					"name": "B2C Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"amount\": 100,\n    \"phone_number\": \"254712345678\",\n    \"remarks\": \"Salary payment\",\n    \"occasion\": \"Monthly salary\",\n    \"command_id\": \"SalaryPayment\",\n    \"result_url\": \"https://yourdomain.com/api/mpesa/callback/b2c\",\n    \"timeout_url\": \"https://yourdomain.com/api/mpesa/callback/b2c\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/b2c",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"b2c"
							]
						},
						"description": "Send money from business to customer.\n\n**Required Fields:**\n- `amount`: Numeric, minimum 1\n- `phone_number`: Format 254XXXXXXXXX\n\n**Optional Fields:**\n- `remarks`: Transaction remarks\n- `occasion`: Occasion for the payment\n- `command_id`: BusinessPayment, SalaryPayment, or PromotionPayment\n- `result_url`: URL for successful transaction callback\n- `timeout_url`: URL for timeout callback"
					},
					"response": []
				}
			],
			"description": "Business to Customer payment endpoints"
		},
		{
			"name": "B2B (Business to Business)",
			"item": [
				{
					"name": "B2B Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"amount\": 1000,\n    \"receiver_shortcode\": \"600000\",\n    \"account_reference\": \"ACC-001\",\n    \"remarks\": \"Business payment\",\n    \"command_id\": \"BusinessPayBill\",\n    \"result_url\": \"https://yourdomain.com/api/mpesa/callback/b2b\",\n    \"timeout_url\": \"https://yourdomain.com/api/mpesa/callback/b2b\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/b2b",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"b2b"
							]
						},
						"description": "Send money from business to business.\n\n**Required Fields:**\n- `amount`: Numeric, minimum 1\n- `receiver_shortcode`: Receiving business shortcode\n\n**Optional Fields:**\n- `account_reference`: Account reference\n- `remarks`: Transaction remarks\n- `command_id`: BusinessPayBill, BusinessBuyGoods, DisburseFundsToBusiness, BusinessToBusinessTransfer, or MerchantToMerchantTransfer\n- `result_url`: URL for successful transaction callback\n- `timeout_url`: URL for timeout callback"
					},
					"response": []
				}
			],
			"description": "Business to Business payment endpoints"
		},
		{
			"name": "Utilities",
			"item": [
				{
					"name": "Account Balance",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"remarks\": \"Balance inquiry\",\n    \"identifier_type\": \"4\",\n    \"result_url\": \"https://yourdomain.com/api/mpesa/callback/balance\",\n    \"timeout_url\": \"https://yourdomain.com/api/mpesa/callback/balance\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/balance",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"balance"
							]
						},
						"description": "Query M-Pesa account balance.\n\n**Optional Fields:**\n- `remarks`: Transaction remarks\n- `identifier_type`: 1 (MSISDN), 2 (Till Number), 4 (Organization shortcode)\n- `result_url`: URL for successful callback\n- `timeout_url`: URL for timeout callback"
					},
					"response": []
				},
				{
					"name": "Transaction Status",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction_id\": \"QGK1234567\",\n    \"identifier_type\": \"4\",\n    \"remarks\": \"Status check\",\n    \"result_url\": \"https://yourdomain.com/api/mpesa/callback/status\",\n    \"timeout_url\": \"https://yourdomain.com/api/mpesa/callback/status\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/transaction-status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"transaction-status"
							]
						},
						"description": "Check the status of a transaction.\n\n**Required Fields:**\n- `transaction_id`: M-Pesa transaction ID\n\n**Optional Fields:**\n- `identifier_type`: 1 (MSISDN), 2 (Till Number), 4 (Organization shortcode)\n- `remarks`: Transaction remarks\n- `result_url`: URL for successful callback\n- `timeout_url`: URL for timeout callback"
					},
					"response": []
				},
				{
					"name": "Reversal",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction_id\": \"QGK1234567\",\n    \"amount\": 100,\n    \"receiver_identifier_type\": \"11\",\n    \"remarks\": \"Transaction reversal\",\n    \"result_url\": \"https://yourdomain.com/api/mpesa/callback/reversal\",\n    \"timeout_url\": \"https://yourdomain.com/api/mpesa/callback/reversal\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/reversal",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"reversal"
							]
						},
						"description": "Reverse a completed M-Pesa transaction.\n\n**Required Fields:**\n- `transaction_id`: M-Pesa transaction ID to reverse\n- `amount`: Amount to reverse (must match original)\n\n**Optional Fields:**\n- `receiver_identifier_type`: 1 (MSISDN), 2 (Till Number), 4 (Organization shortcode), 11 (Reversal)\n- `remarks`: Reversal remarks\n- `result_url`: URL for successful callback\n- `timeout_url`: URL for timeout callback"
					},
					"response": []
				}
			],
			"description": "Utility endpoints for balance, status checks, and reversals"
		},
		{
			"name": "Callbacks",
			"item": [
				{
					"name": "STK Push Callback",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"Body\": {\n        \"stkCallback\": {\n            \"MerchantRequestID\": \"29115-34620561-1\",\n            \"CheckoutRequestID\": \"ws_CO_191220191020363925\",\n            \"ResultCode\": 0,\n            \"ResultDesc\": \"The service request is processed successfully.\",\n            \"CallbackMetadata\": {\n                \"Item\": [\n                    {\n                        \"Name\": \"Amount\",\n                        \"Value\": 1.00\n                    },\n                    {\n                        \"Name\": \"MpesaReceiptNumber\",\n                        \"Value\": \"NLJ7RT61SV\"\n                    },\n                    {\n                        \"Name\": \"TransactionDate\",\n                        \"Value\": 20191219102115\n                    },\n                    {\n                        \"Name\": \"PhoneNumber\",\n                        \"Value\": 254712345678\n                    }\n                ]\n            }\n        }\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/callback/stk",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"callback",
								"stk"
							]
						},
						"description": "Callback endpoint for STK Push responses. This is called by M-Pesa, not by you.\n\nThis example shows a successful payment callback structure."
					},
					"response": []
				},
				{
					"name": "C2B Callback",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"TransactionType\": \"Pay Bill\",\n    \"TransID\": \"QGK1234567\",\n    \"TransTime\": \"20191122063845\",\n    \"TransAmount\": \"100.00\",\n    \"BusinessShortCode\": \"600000\",\n    \"BillRefNumber\": \"BILL-001\",\n    \"InvoiceNumber\": \"\",\n    \"OrgAccountBalance\": \"49001.00\",\n    \"ThirdPartyTransID\": \"\",\n    \"MSISDN\": \"254712345678\",\n    \"FirstName\": \"John\",\n    \"MiddleName\": \"\",\n    \"LastName\": \"Doe\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/callback/c2b",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"callback",
								"c2b"
							]
						},
						"description": "Callback endpoint for C2B payments. This is called by M-Pesa, not by you.\n\nThis example shows a typical C2B payment callback structure."
					},
					"response": []
				},
				{
					"name": "B2C Callback",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"Result\": {\n        \"ResultType\": 0,\n        \"ResultCode\": 0,\n        \"ResultDesc\": \"The service request is processed successfully.\",\n        \"OriginatorConversationID\": \"29115-34620561-1\",\n        \"ConversationID\": \"AG_20191219_00004e48cf7e3533f581\",\n        \"TransactionID\": \"NLJ41HAY6Q\",\n        \"ResultParameters\": {\n            \"ResultParameter\": [\n                {\n                    \"Key\": \"TransactionAmount\",\n                    \"Value\": 100\n                },\n                {\n                    \"Key\": \"TransactionReceipt\",\n                    \"Value\": \"NLJ41HAY6Q\"\n                },\n                {\n                    \"Key\": \"ReceiverPartyPublicName\",\n                    \"Value\": \"254712345678 - John Doe\"\n                },\n                {\n                    \"Key\": \"TransactionCompletedDateTime\",\n                    \"Value\": \"19.12.2019 10:45:50\"\n                },\n                {\n                    \"Key\": \"B2CUtilityAccountAvailableFunds\",\n                    \"Value\": 10000.00\n                },\n                {\n                    \"Key\": \"B2CWorkingAccountAvailableFunds\",\n                    \"Value\": 900000.00\n                },\n                {\n                    \"Key\": \"B2CRecipientIsRegisteredCustomer\",\n                    \"Value\": \"Y\"\n                },\n                {\n                    \"Key\": \"B2CChargesPaidAccountAvailableFunds\",\n                    \"Value\": 0.00\n                }\n            ]\n        },\n        \"ReferenceData\": {\n            \"ReferenceItem\": {\n                \"Key\": \"QueueTimeoutURL\",\n                \"Value\": \"https://yourdomain.com/api/mpesa/callback/b2c\"\n            }\n        }\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/mpesa/callback/b2c",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"mpesa",
								"callback",
								"b2c"
							]
						},
						"description": "Callback endpoint for B2C payments. This is called by M-Pesa, not by you.\n\nThis example shows a successful B2C payment callback structure."
					},
					"response": []
				}
			],
			"description": "Callback endpoints that M-Pesa will call with transaction results"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		}
	]
}
